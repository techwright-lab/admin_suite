<% content_for :title, "#{@title} - Docs" %>

<div class="px-4 sm:px-6 lg:px-8">
  <% actions = [
    { label: "Back to Docs", path: admin_docs_path, style: :secondary }
  ] %>

  <%= render "admin/shared/page_header",
      title: @title,
      description: "docs/#{@relative_path}",
      actions: render("admin/shared/action_bar", actions: actions) %>

  <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
    <div class="lg:col-span-8">
      <div class="bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700">
        <div class="p-6">
          <div class="prose prose-slate dark:prose-invert max-w-none">
            <%= @content_html %>
          </div>
        </div>
      </div>
    </div>

    <aside class="lg:col-span-4">
      <% if @toc.present? %>
        <div class="lg:sticky lg:top-24 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6">
          <h2 class="text-sm font-semibold text-slate-900 dark:text-white">On this page</h2>
          <nav class="mt-4 space-y-2">
            <% @toc.each do |item| %>
              <% padding_class = case item[:level].to_i
                 when 3 then "pl-3"
                 when 4 then "pl-6"
                 else ""
                 end %>
              <a
                href="#<%= item[:id] %>"
                class="block text-sm text-slate-600 dark:text-slate-300 hover:text-amber-600 dark:hover:text-amber-400 transition-colors <%= padding_class %>"
              >
                <%= item[:text] %>
              </a>
            <% end %>
          </nav>
        </div>
      <% end %>
    </aside>
  </div>
</div>


