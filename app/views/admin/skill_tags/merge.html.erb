<% content_for :title, "Merge Skill Tag - Admin" %>

<div class="px-4 sm:px-6 lg:px-8 max-w-3xl">
  <%= render "admin/shared/page_header",
      title: "Merge Skill Tag",
      description: "Move all associations to another skill tag, then disable the source tag.",
      breadcrumbs: [
        { label: "Skill Tags", path: admin_skill_tags_path },
        { label: @skill_tag.name, path: admin_skill_tag_path(@skill_tag) },
        { label: "Merge" }
      ] %>

  <div class="bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6">
    <div class="mb-4">
      <p class="text-sm text-slate-600 dark:text-slate-400">
        Source: <span class="font-medium text-slate-900 dark:text-white"><%= @skill_tag.name %></span>
      </p>
      <p class="mt-1 text-xs text-slate-500 dark:text-slate-400">
        After merging, the source skill tag will be disabled.
      </p>
    </div>

    <%= form_with url: merge_into_admin_skill_tag_path(@skill_tag), method: :post, local: true, class: "space-y-6" do |f| %>
      <%= render "shared/autocomplete",
        form: f,
        field_name: :target_skill_tag_id,
        label: "Merge into",
        placeholder: "Search or create skill tag...",
        autocomplete_url: autocomplete_skill_tags_path,
        create_url: skill_tags_path,
        modal_id: "skill-tag-merge-modal",
        value: @selected_target_skill_tag&.id,
        display_value: @selected_target_skill_tag&.name,
        required: true,
        help_text: "Pick the skill tag that should remain after the merge",
        wrapper_class: "mb-0" %>

      <div class="flex items-center justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700">
        <%= link_to "Cancel", admin_skill_tag_path(@skill_tag), class: "px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors" %>
        <%= f.submit "Merge", class: "px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-medium rounded-lg transition-colors cursor-pointer", data: { turbo_confirm: "Merge this skill tag? The source will be disabled." } %>
      </div>
    <% end %>
  </div>
</div>
