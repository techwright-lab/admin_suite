<%# Toggle switch for boolean fields on index pages %>
<%#
  Required locals:
    - record: The record to toggle
    - field: The boolean field name (e.g., :value, :enabled, :active)
    - toggle_url: (optional) Custom URL for the toggle action
%>
<%
  value = record.public_send(field)
  frame_id = dom_id(record, "#{field}_toggle")
  toggle_url ||= begin
    url_for(action: :toggle, id: record.id, field: field)
  rescue ActionController::UrlGenerationError
    resource_toggle_path(portal: params[:portal], resource_name: params[:resource_name], id: record.id, field: field)
  rescue StandardError
    nil
  end
%>

<%= turbo_frame_tag frame_id, class: "admin-suite-toggle-wrap inline-flex align-middle" do %>
  <% if toggle_url %>
    <%= button_to toggle_url,
        method: :post,
        params: { field: field },
        form: { data: { turbo_frame: frame_id }, class: "m-0 inline-flex align-middle items-center" },
        class: "admin-suite-toggle-track #{value ? 'is-on' : ''}" do %>
      <span class="sr-only">Toggle <%= field.to_s.humanize %></span>
      <span class="admin-suite-toggle-thumb"></span>
    <% end %>
  <% else %>
    <%# Read-only toggle display when no toggle URL available %>
    <span class="admin-suite-toggle-track <%= value ? 'is-on' : '' %>">
      <span class="admin-suite-toggle-thumb"></span>
    </span>
  <% end %>
<% end %>
