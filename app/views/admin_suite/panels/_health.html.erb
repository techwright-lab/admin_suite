<% status = (panel_eval(panel.options[:status]) || :unknown).to_sym %>
<% metrics = panel_eval(panel.options[:metrics]) || {} %>

<% status_config = case status
  when :healthy
    { border: "border-green-200",
      badge: "bg-green-100 text-green-700",
      dot: "bg-green-500 animate-pulse" }
  when :degraded
    { border: "border-amber-200",
      badge: "bg-amber-100 text-amber-700",
      dot: "bg-amber-500 animate-pulse" }
  when :critical
    { border: "border-red-200",
      badge: "bg-red-100 text-red-700",
      dot: "bg-red-500 animate-pulse" }
  else
    { border: "border-slate-200",
      badge: "bg-slate-100 text-slate-600",
      dot: "bg-slate-400" }
end %>

<div class="bg-white rounded-xl border <%= status_config[:border] %> overflow-hidden">
  <div class="px-4 py-3 border-b border-slate-200 flex items-center justify-between">
    <h3 class="font-semibold text-slate-900"><%= panel.title %></h3>
    <span class="flex items-center gap-1.5 px-2 py-1 rounded-full text-xs font-medium <%= status_config[:badge] %>">
      <span class="w-2 h-2 rounded-full <%= status_config[:dot] %>"></span>
      <%= status.to_s.humanize %>
    </span>
  </div>

  <% if metrics.present? %>
    <div class="p-4 grid grid-cols-2 gap-3">
      <% metrics.each do |key, val| %>
        <div>
          <div class="text-lg font-semibold text-slate-900"><%= val %></div>
          <div class="text-xs text-slate-500"><%= key.to_s.humanize %></div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="p-4 text-sm text-slate-500">No metrics.</div>
  <% end %>
</div>
