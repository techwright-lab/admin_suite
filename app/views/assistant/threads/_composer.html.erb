<%# locals: thread %>
<%= form_with url: assistant_thread_messages_path(thread), 
              method: :post, 
              class: "relative",
              data: { 
                controller: "assistant-composer", 
                action: "turbo:submit-start->assistant-composer#submitStart turbo:submit-end->assistant-composer#submitEnd"
              } do |f| %>
  <%= hidden_field_tag :client_request_uuid, nil, data: { "assistant-composer-target": "requestId" } %>
  
  <div class="relative flex items-end bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700">
    <%= text_area_tag :content, nil,
      rows: 1,
      placeholder: "Message Gleania...",
      autofocus: true,
      class: "flex-1 resize-none bg-transparent border-0 px-4 py-3 pr-12 text-sm text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-0 focus:outline-none max-h-32",
      data: { 
        "assistant-composer-target": "input",
        action: "keydown->assistant-composer#handleKeydown input->assistant-composer#autoResize"
      } %>
    
    <button 
      type="submit" 
      class="absolute right-2 bottom-2 p-2 text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
      data-assistant-composer-target="submitButton"
      title="Send (Enter)"
    >
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
      </svg>
    </button>
  </div>
<% end %>
